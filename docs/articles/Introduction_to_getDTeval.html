<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to GetDTeval • getDTeval</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to GetDTeval">
<meta property="og:description" content="getDTeval">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">getDTeval</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Introduction_to_getDTeval.html">Introduction to GetDTeval</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Introduction_to_getDTeval_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to GetDTeval</h1>
            
            <h4 class="date">2020-09-22</h4>
      
      
      <div class="hidden name"><code>Introduction_to_getDTeval.Rmd</code></div>

    </div>

    
    
<p>This vignette aims to provide an introduction to getDTeval and an approach to implementing programmaticly designed coding statements without compromising on the runtime performance. Familiarity with the syntax of the data.table and dplyr packages would be useful, but it is not essential to follow this vignette.</p>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>Programmatic designs build coding statements with flexible structures that can easily be modified. The best practices of software design recommend using variables to store certain values (e.g. constants or thresholds) that will be used in calculations. The same principle can apply to the use of the names of variables in a data.frame object. As an example, we will consider two approaches to calculating a simple mean and constructing a new variable. The data used here will be based on the <strong>snack.dat</strong> data from the <strong>formulaic</strong> package (<a href="https://cran.r-project.org/web/packages/formulaic/index.html" class="uri">https://cran.r-project.org/web/packages/formulaic/index.html</a>):</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="no">dat</span> <span class="kw">&lt;-</span> <span class="kw pkg">data.table</span><span class="kw ns">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html">data.table</a></span>(<span class="kw pkg">formulaic</span><span class="kw ns">::</span><span class="no"><a href="https://rdrr.io/pkg/formulaic/man/snack.dat.html">snack.dat</a></span>)
<span class="no">threshold.age</span> <span class="kw">&lt;-</span> <span class="fl">35</span>

<span class="co">## Approach 1</span>
<span class="no">dat</span>[, <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="no">Age</span>)]
<span class="co">#&gt; [1] 55.201</span>
<span class="no">dat</span>[, <span class="no">youngest_cohort</span> <span class="kw">:=</span> (<span class="no">Age</span> <span class="kw">&lt;</span> <span class="no">threshold.age</span>)]

<span class="co">## Approach 2</span>
<span class="no">age.name</span> <span class="kw">&lt;-</span> <span class="st">"Age"</span>
<span class="no">youngest.cohort.name</span> <span class="kw">&lt;-</span> <span class="st">"youngest_cohort"</span>
<span class="no">dat</span>[, <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/get.html">get</a></span>(<span class="no">age.name</span>))]
<span class="co">#&gt; [1] 55.201</span>
<span class="no">dat</span>[, <span class="fu"><a href="https://rdrr.io/r/base/eval.html">eval</a></span>(<span class="no">youngest.cohort.name</span>) <span class="kw">:=</span> (<span class="fu"><a href="https://rdrr.io/r/base/get.html">get</a></span>(<span class="no">age.name</span>) <span class="kw">&lt;</span> <span class="no">threshold.age</span>)]</pre></body></html></div>
<p>In the second approach, the <strong>get()</strong> and <strong>eval()</strong> functions are used to convert previously defined variables into quantities that can be used in the calculations. Within the dat object, using the get function will locate a variable with the corresponding name and return the vector of values for use in the computations of the mean or the logical comparison of ages to a threshold. Meanwhile, the eval function allows us to specify the name of a new variable that will be added to the dat object.</p>
<p>Programmatic designs with the get() and eval() functions facilitate calculations in functions and in dynamic applications. Even for basic analyses, this design creates greater flexibility for possible changes. If the name of the Age variable were later changed to another value (e.g. Age_Years), the program could be adapted with a simple modification to the age.name variable. Any downstream use of the Age variable through calls of get() or eval() to age.name would automatically adapt to the change.</p>
<p>However, programmatic designs can lead to reduced runtime efficiency. In the case of simple calls to the get() function, the performance can greatly decrease. The following example demonstrates the associated reductions in efficiency in the case of calculating a grouped average.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">age.name</span> <span class="kw">&lt;-</span> <span class="st">"Age"</span>
<span class="no">gender.name</span> <span class="kw">&lt;-</span> <span class="st">"Gender"</span>
<span class="no">region.name</span> <span class="kw">&lt;-</span> <span class="st">"Region"</span>


<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="kw">seed</span> <span class="kw">=</span> <span class="fl">293</span>)
<span class="no">sampledat</span> <span class="kw">&lt;-</span> <span class="no">dat</span>[<span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="fl">1</span>:<span class="no">.N</span>, <span class="kw">size</span> <span class="kw">=</span> <span class="fl">10</span>^<span class="fl">6</span>, <span class="kw">replace</span> <span class="kw">=</span> <span class="fl">TRUE</span>)]
<span class="no">times</span> <span class="kw">&lt;-</span> <span class="fl">50</span>

<span class="no">t1</span> <span class="kw">&lt;-</span>
  <span class="kw pkg">microbenchmark</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html">microbenchmark</a></span>(<span class="no">sampledat</span>[, <span class="fu">.</span>(<span class="kw">mean_age</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="no">Age</span>)), <span class="kw">keyby</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Gender"</span>, <span class="st">"Region"</span>)], <span class="kw">times</span> <span class="kw">=</span> <span class="no">times</span>)

<span class="no">t2</span> <span class="kw">&lt;-</span>
  <span class="kw pkg">microbenchmark</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html">microbenchmark</a></span>(<span class="no">sampledat</span>[, <span class="fu">.</span>(<span class="kw">mean_age</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/get.html">get</a></span>(<span class="no">age.name</span>))), <span class="kw">keyby</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="no">gender.name</span>, <span class="no">region.name</span>)], <span class="kw">times</span> <span class="kw">=</span> <span class="no">times</span>)


<span class="no">results</span> <span class="kw">&lt;-</span>
  <span class="kw pkg">data.table</span><span class="kw ns">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html">data.table</a></span>(
    <span class="kw">Classic_Mean</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="no">t1</span>$<span class="no">time</span>),
    <span class="kw">Classic_Median</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span>(<span class="no">t1</span>$<span class="no">time</span>),
    <span class="kw">Programmatic_Mean</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="no">t2</span>$<span class="no">time</span>),
    <span class="kw">Programmatic_Median</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span>(<span class="no">t2</span>$<span class="no">time</span>)
  ) / <span class="fl">10</span> ^ <span class="fl">9</span>

<span class="no">results</span>[, <span class="no">Effect_Median</span> <span class="kw">:=</span> <span class="no">Programmatic_Median</span>/<span class="no">Classic_Median</span>]
<span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">results</span>, <span class="kw">digits</span> <span class="kw">=</span> <span class="fl">4</span>)
<span class="co">#&gt;    Classic_Mean Classic_Median Programmatic_Mean Programmatic_Median</span>
<span class="co">#&gt; 1:       0.0254          0.024            0.0791              0.0781</span>
<span class="co">#&gt;    Effect_Median</span>
<span class="co">#&gt; 1:        3.2539</span></pre></body></html></div>
<p>For larger sample sizes and more complex calculations, the effect of programmatic designs can significantly increase the running time complexity.</p>
<p>The <strong>getDTeval</strong> package was designed to overcome the trade-offs between programmatic designs and running time efficiency. The package creates a means of translating calls to get() and eval() into more optimized coding statements. In doing so, the package not only resolves many observed trade-offs between speed and efficiency; it also creates opportunities to expand the areas in which programmatic designs may be used in common coding applications.</p>
</div>
<div id="methods" class="section level2">
<h2 class="hasAnchor">
<a href="#methods" class="anchor"></a>Methods</h2>
<p>The getDTeval package introduces two functions: <strong>getDTeval::getDTeval</strong> and <strong>getDTeval::benchmark.getDTeval</strong>. The getDTeval() function is used to translate and evaluate coding statements into more optimized forms. The benchmark.getDTeval() function then provides a means of comparing the run-time performance of a coding statement.</p>
<div id="getdteval" class="section level3">
<h3 class="hasAnchor">
<a href="#getdteval" class="anchor"></a>getDTeval()</h3>
<p>The getDTeval() function facilitates the translation of the original coding statement to an optimized form for improved runtime efficiency without compromising on the programmatic coding design. The function can either provide a translation of the coding statement, directly evaluate the translation to return a coding result, or provide both of these outputs.</p>
<div id="parameter-descriptions" class="section level4">
<h4 class="hasAnchor">
<a href="#parameter-descriptions" class="anchor"></a>parameter descriptions</h4>
<ul>
<li><p><strong>the.statement</strong> refers to the original coding statement which needs to be translated to an optimized form. This value may be entered as either a character value or as an expression.</p></li>
<li><p><strong>return.as</strong> refers to the mode of output. It could return the results as a coding statement (return.as = “code”), an evaluated coding result (return.as = “result”, which is the default value), or a combination of both (return.as = “all”).</p></li>
<li><p><strong>coding.statements.as</strong> determines whether the coding statements provided as outputs are returned as expression objects (return.as = “expression”) or as character values (return.as = “character”, which is the default).</p></li>
<li><p><strong>eval.type</strong> specifies whether the coding statement will be evaluated in its current form (eval.type = “as.is”) or in an optimized form (eval.type = “optimized”, the default setting).</p></li>
</ul>
</div>
</div>
<div id="examples-of-getdteval" class="section level3">
<h3 class="hasAnchor">
<a href="#examples-of-getdteval" class="anchor"></a>Examples of getDTeval()</h3>
<p>The following examples demonstrate applications of the getDTeval() function in common calculations.</p>
</div>
<div id="example-1-grouped-mean-in-data-table-using-get-statements" class="section level3">
<h3 class="hasAnchor">
<a href="#example-1-grouped-mean-in-data-table-using-get-statements" class="anchor"></a>Example 1: Grouped Mean in data.table Using get() Statements</h3>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">income.name</span> <span class="kw">&lt;-</span> <span class="st">"Income"</span>
<span class="no">gender.name</span> <span class="kw">&lt;-</span> <span class="st">"Gender"</span>
<span class="no">the.statement.1</span> <span class="kw">&lt;-</span> <span class="st">"dat[,.(mean_income=mean(get(income.name))), keyby = get(gender.name)]"</span></pre></body></html></div>
<div id="example-1a-translated-code" class="section level4">
<h4 class="hasAnchor">
<a href="#example-1a-translated-code" class="anchor"></a>Example 1a: Translated Code</h4>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu"><a href="../reference/getDTeval.html">getDTeval</a></span>(<span class="kw">the.statement</span> <span class="kw">=</span> <span class="no">the.statement.1</span>, <span class="kw">return.as</span> <span class="kw">=</span> <span class="st">"code"</span>)
<span class="co">#&gt; [1] "dat[,.(mean_income=mean(Income)), keyby = Gender]"</span></pre></body></html></div>
</div>
<div id="example-1b-result" class="section level4">
<h4 class="hasAnchor">
<a href="#example-1b-result" class="anchor"></a>Example 1b: Result</h4>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="fu"><a href="../reference/getDTeval.html">getDTeval</a></span>(<span class="kw">the.statement</span> <span class="kw">=</span> <span class="no">the.statement.1</span>, <span class="kw">return.as</span> <span class="kw">=</span> <span class="st">"result"</span>)
<span class="co">#&gt;    Gender mean_income</span>
<span class="co">#&gt; 1: Female    81236.22</span>
<span class="co">#&gt; 2:   Male    84520.33</span></pre></body></html></div>
</div>
<div id="example-1c-translations-and-results" class="section level4">
<h4 class="hasAnchor">
<a href="#example-1c-translations-and-results" class="anchor"></a>Example 1c: Translations and Results</h4>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="fu"><a href="../reference/getDTeval.html">getDTeval</a></span>(<span class="kw">the.statement</span> <span class="kw">=</span> <span class="no">the.statement.1</span>, <span class="kw">return.as</span> <span class="kw">=</span> <span class="st">"all"</span>)
<span class="co">#&gt; $result</span>
<span class="co">#&gt;    Gender mean_income</span>
<span class="co">#&gt; 1: Female    81236.22</span>
<span class="co">#&gt; 2:   Male    84520.33</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $code</span>
<span class="co">#&gt; [1] "dat[,.(mean_income=mean(Income)), keyby = Gender]"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $original.statement</span>
<span class="co">#&gt; [1] "dat[,.(mean_income=mean(get(income.name))), keyby = get(gender.name)]"</span></pre></body></html></div>
</div>
</div>
<div id="example-2-filtered-and-grouped-mean-with-dplyr" class="section level3">
<h3 class="hasAnchor">
<a href="#example-2-filtered-and-grouped-mean-with-dplyr" class="anchor"></a>Example 2: Filtered and Grouped Mean with dplyr</h3>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dplyr</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'dplyr'</span>
<span class="co">#&gt; The following objects are masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter, lag</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     intersect, setdiff, setequal, union</span>
<span class="no">income.name</span> <span class="kw">&lt;-</span> <span class="st">"Income"</span>
<span class="no">region.name</span> <span class="kw">&lt;-</span> <span class="st">"Region"</span>
<span class="no">awareness.name</span> <span class="kw">&lt;-</span> <span class="st">"Awareness"</span>
<span class="no">threshold.income</span> <span class="kw">&lt;-</span> <span class="fl">75000</span>

<span class="no">the.statement.2</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/base/expression.html">expression</a></span>(
    <span class="no">dat</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/get.html">get</a></span>(<span class="no">income.name</span>) <span class="kw">&lt;</span> <span class="no">threshold.income</span>) <span class="kw">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/get.html">get</a></span>(<span class="no">region.name</span>)) <span class="kw">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span>(<span class="kw">prop_aware</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/get.html">get</a></span>(<span class="no">awareness.name</span>)))
  )</pre></body></html></div>
<p>In particular, note that <strong>the.statement</strong> can be entered as either an expression or as a character value. When the coding statement itself includes quotation marks, some care should be taken to ensure that the statement is properly represented. For instance, consider a coding statement like dat[, mean(Age), by = c(‘Region’, ‘Gender’)]. Using double quotation marks for Region or Gender could create issues with writing this statement inside of a character value. A convention such as only using single quotations inside of the coding statement could simplify the problem. Otherwise, placing the coding statement in an expression ensures that any set of valid coding symbols may be used.</p>
<p>In the following examples, we will show how the code itself can be returned as either a character or as an expression.</p>
<div id="example-2a-translations" class="section level4">
<h4 class="hasAnchor">
<a href="#example-2a-translations" class="anchor"></a>Example 2a: Translations</h4>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="fu"><a href="../reference/getDTeval.html">getDTeval</a></span>(<span class="kw">the.statement</span> <span class="kw">=</span> <span class="no">the.statement.2</span>, <span class="kw">return.as</span> <span class="kw">=</span> <span class="st">"code"</span>, <span class="kw">coding.statements.as</span> <span class="kw">=</span> <span class="st">"expression"</span>)
<span class="co">#&gt; expression(dat %&gt;% filter(Income &lt; threshold.income) %&gt;% group_by(Region) %&gt;% </span>
<span class="co">#&gt;     summarise(prop_aware = mean(Awareness)))</span>
<span class="fu"><a href="../reference/getDTeval.html">getDTeval</a></span>(<span class="kw">the.statement</span> <span class="kw">=</span> <span class="no">the.statement.2</span>, <span class="kw">return.as</span> <span class="kw">=</span> <span class="st">"code"</span>, <span class="kw">coding.statements.as</span> <span class="kw">=</span> <span class="st">"character"</span>)
<span class="co">#&gt; [1] "dat %&gt;% filter(Income &lt; threshold.income) %&gt;% group_by(Region) %&gt;% summarise(prop_aware = mean(Awareness))"</span></pre></body></html></div>
</div>
<div id="example-2b-result" class="section level4">
<h4 class="hasAnchor">
<a href="#example-2b-result" class="anchor"></a>Example 2b: Result</h4>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="fu"><a href="../reference/getDTeval.html">getDTeval</a></span>(<span class="kw">the.statement</span> <span class="kw">=</span> <span class="no">the.statement.2</span>, <span class="kw">return.as</span> <span class="kw">=</span> <span class="st">"result"</span>)
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 4 x 2</span>
<span class="co">#&gt;   Region    prop_aware</span>
<span class="co">#&gt;   &lt;fct&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Midwest        0.541</span>
<span class="co">#&gt; 2 Northeast      0.547</span>
<span class="co">#&gt; 3 South          0.526</span>
<span class="co">#&gt; 4 West           0.498</span></pre></body></html></div>
</div>
<div id="example-1c-translations-and-results-1" class="section level4">
<h4 class="hasAnchor">
<a href="#example-1c-translations-and-results-1" class="anchor"></a>Example 1c: Translations and Results</h4>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="fu"><a href="../reference/getDTeval.html">getDTeval</a></span>(<span class="kw">the.statement</span> <span class="kw">=</span> <span class="no">the.statement.2</span>, <span class="kw">return.as</span> <span class="kw">=</span> <span class="st">"all"</span>, <span class="kw">coding.statements.as</span> <span class="kw">=</span> <span class="st">"expression"</span>)
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; $result</span>
<span class="co">#&gt; # A tibble: 4 x 2</span>
<span class="co">#&gt;   Region    prop_aware</span>
<span class="co">#&gt;   &lt;fct&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Midwest        0.541</span>
<span class="co">#&gt; 2 Northeast      0.547</span>
<span class="co">#&gt; 3 South          0.526</span>
<span class="co">#&gt; 4 West           0.498</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $code</span>
<span class="co">#&gt; expression(dat %&gt;% filter(Income &lt; threshold.income) %&gt;% group_by(Region) %&gt;% </span>
<span class="co">#&gt;     summarise(prop_aware = mean(Awareness)))</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $original.statement</span>
<span class="co">#&gt; expression(dat %&gt;% filter(get(income.name) &lt; threshold.income) %&gt;% </span>
<span class="co">#&gt;     group_by(get(region.name)) %&gt;% summarise(prop_aware = mean(get(awareness.name))))</span>
<span class="fu"><a href="../reference/getDTeval.html">getDTeval</a></span>(<span class="kw">the.statement</span> <span class="kw">=</span> <span class="no">the.statement.2</span>, <span class="kw">return.as</span> <span class="kw">=</span> <span class="st">"all"</span>, <span class="kw">coding.statements.as</span> <span class="kw">=</span> <span class="st">"character"</span>)
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; $result</span>
<span class="co">#&gt; # A tibble: 4 x 2</span>
<span class="co">#&gt;   Region    prop_aware</span>
<span class="co">#&gt;   &lt;fct&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Midwest        0.541</span>
<span class="co">#&gt; 2 Northeast      0.547</span>
<span class="co">#&gt; 3 South          0.526</span>
<span class="co">#&gt; 4 West           0.498</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $code</span>
<span class="co">#&gt; [1] "dat %&gt;% filter(Income &lt; threshold.income) %&gt;% group_by(Region) %&gt;% summarise(prop_aware = mean(Awareness))"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $original.statement</span>
<span class="co">#&gt; expression(dat %&gt;% filter(get(income.name) &lt; threshold.income) %&gt;% </span>
<span class="co">#&gt;     group_by(get(region.name)) %&gt;% summarise(prop_aware = mean(get(awareness.name))))</span></pre></body></html></div>
</div>
</div>
<div id="example-3-running-code-as-is-or-in-optimized-statements" class="section level3">
<h3 class="hasAnchor">
<a href="#example-3-running-code-as-is-or-in-optimized-statements" class="anchor"></a>Example 3: Running Code As Is or in Optimized Statements</h3>
<p>The getDTeval() function also includes methods to run the code according to the original statement or in its optimized form. This is a good way to double check that the coding translation performs as intended. In the following example, we will demonstrate both kinds of calculations. This includes the following preliminary steps:</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="no">the.statement.3</span> <span class="kw">&lt;-</span> <span class="st">"tab &lt;- dat[, .(prop_awareness = mean(get(awareness.name))), by = eval(region.name)]; data.table::setorderv(x = tab, cols = region.name, order = -1)"</span></pre></body></html></div>
<div id="example-3a-running-code-as-is" class="section level4">
<h4 class="hasAnchor">
<a href="#example-3a-running-code-as-is" class="anchor"></a>Example 3a: Running Code As Is</h4>
<p>When the coding statement is evaluated with return.as = “result” or return.as = “all”, then using eval.type = “as.is” means that the original coding statement is evaluated.</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="fu"><a href="../reference/getDTeval.html">getDTeval</a></span>(<span class="kw">the.statement</span> <span class="kw">=</span> <span class="no">the.statement.3</span>, <span class="kw">return.as</span> <span class="kw">=</span> <span class="st">"result"</span>, <span class="kw">eval.type</span> <span class="kw">=</span> <span class="st">"as.is"</span>)
<span class="co">#&gt;       Region prop_awareness</span>
<span class="co">#&gt; 1:      West      0.5066667</span>
<span class="co">#&gt; 2:     South      0.5307453</span>
<span class="co">#&gt; 3: Northeast      0.5387838</span>
<span class="co">#&gt; 4:   Midwest      0.5399338</span></pre></body></html></div>
</div>
<div id="example-3b-running-the-translated-code" class="section level4">
<h4 class="hasAnchor">
<a href="#example-3b-running-the-translated-code" class="anchor"></a>Example 3b: Running the Translated Code</h4>
<p>When the coding statement is evaluated with return.as = “result” or return.as = “all”, then using eval.type = “optimized” means that the translated coding statement is evaluated.</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="fu"><a href="../reference/getDTeval.html">getDTeval</a></span>(<span class="kw">the.statement</span> <span class="kw">=</span> <span class="no">the.statement.3</span>, <span class="kw">return.as</span> <span class="kw">=</span> <span class="st">"result"</span>, <span class="kw">eval.type</span> <span class="kw">=</span> <span class="st">"optimized"</span>)
<span class="co">#&gt;       Region prop_awareness</span>
<span class="co">#&gt; 1:      West      0.5066667</span>
<span class="co">#&gt; 2:     South      0.5307453</span>
<span class="co">#&gt; 3: Northeast      0.5387838</span>
<span class="co">#&gt; 4:   Midwest      0.5399338</span></pre></body></html></div>
</div>
</div>
<div id="benchmarking-with-benchmark-getdteval" class="section level3">
<h3 class="hasAnchor">
<a href="#benchmarking-with-benchmark-getdteval" class="anchor"></a>Benchmarking with benchmark.getDTeval()</h3>
<p>benchmark.getDTeval function facilitates comparisons of the running time complexity of calculations based on different forms of a coding statement. The original statement’s performance will be compared to the running time after the statement is translated using getDTeval().</p>
</div>
<div id="parameter-description" class="section level3">
<h3 class="hasAnchor">
<a href="#parameter-description" class="anchor"></a>parameter description</h3>
<ul>
<li>
<strong>the.statement</strong> refers to the original coding statement, just as in getDTeval().</li>
<li>
<strong>times</strong> The number of iterations to run the benchmarking experiment.</li>
<li>
<strong>seed</strong> an integer value specifying the seed of the pseudorandom number generator.</li>
</ul>
</div>
</div>
<div id="an-example-to-highlight-the-benchmark-getdteval-function" class="section level2">
<h2 class="hasAnchor">
<a href="#an-example-to-highlight-the-benchmark-getdteval-function" class="anchor"></a>An example to highlight the benchmark.getDTeval function</h2>
<p>To highlight the application of the benchmark.getDTeval() function, we will use a sample of 1 million observations drawn with replacement from the snack.dat.</p>
<div id="example-4" class="section level3">
<h3 class="hasAnchor">
<a href="#example-4" class="anchor"></a>Example 4</h3>
<p>We will be calculating the mean awareness of the survey’s participants by region. The benchmark.getDTeval() function will be used to compare the running times of the original programmatic coding statement and the translated statement. This comparison also evaluates the time of the optimized statement, which would use the translated statement without the time required to translate it.</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="no">sample.dat</span> <span class="kw">&lt;-</span> <span class="no">dat</span>[<span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="fl">1</span>:<span class="no">.N</span>,
                         <span class="kw">size</span> <span class="kw">=</span> <span class="fl">10</span> ^ <span class="fl">6</span>,
                         <span class="kw">replace</span> <span class="kw">=</span> <span class="fl">TRUE</span>)]
<span class="no">the.statement.4</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/base/expression.html">expression</a></span>(<span class="no">sample.dat</span>[, <span class="fu">.</span>(<span class="kw">pct_awareness</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/get.html">get</a></span>(<span class="no">awareness.name</span>)) * <span class="fl">100</span>), <span class="kw">keyby</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html">get</a></span>(<span class="no">region.name</span>)])

<span class="fu"><a href="../reference/benchmark.getDTeval.html">benchmark.getDTeval</a></span>(<span class="kw">the.statement</span> <span class="kw">=</span> <span class="no">the.statement.4</span>,
                    <span class="kw">times</span> <span class="kw">=</span> <span class="fl">50</span>,
                    <span class="kw">seed</span> <span class="kw">=</span> <span class="fl">282</span>)
<span class="co">#&gt;                      category    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.</span>
<span class="co">#&gt; 1: optimized coding statement 0.01042 0.01115 0.01186 0.01343 0.01317 0.05044</span>
<span class="co">#&gt; 2:        getDTeval statement 0.01078 0.01179 0.01233 0.01435 0.01400 0.06836</span>
<span class="co">#&gt; 3:  original coding statement 0.05184 0.05499 0.05989 0.06242 0.06741 0.09860</span></pre></body></html></div>
<p>The original coding statement uses calls to get() to generate results with a programmatic design. In the median and average cases, the running time is substantially worse than using the more optimized statement. There is a real trade-off between the flexibility of the programmatic design and the running time performance of directly naming the variables. However, translating the programmatic design’s coding statement using getDTeval() produces running times that are quite similar to what is produced while directly using the optimized statements. These results suggest that getDTeval() can effectively eliminate these tradeoffs.</p>
</div>
</div>
<div id="benefits-getdteval" class="section level2">
<h2 class="hasAnchor">
<a href="#benefits-getdteval" class="anchor"></a>Benefits getDTeval</h2>
<p>The getDTeval package offers a number of benefits to bridge the gap between the flexibility of coding statements and their runtime execution. These benefits are as follows:</p>
<ul>
<li>Minimizing the running time complexity of the algorithms;</li>
<li>Using the available computing resources efficiently;</li>
<li>Ease of implementation for an analyst;</li>
<li>Translations that can improve the readability of coding designs;</li>
<li>Enhanced flexibility with programmatic designs for streamlined iterations and revision.</li>
</ul>
</div>
<div id="extending-the-capacity-for-programmatic-designs" class="section level2">
<h2 class="hasAnchor">
<a href="#extending-the-capacity-for-programmatic-designs" class="anchor"></a>Extending the Capacity for Programmatic Designs</h2>
<p>The getDTeval() function performs code translations of any calls to get() or eval() within a coding statement. In some cases, this translation can enable the use of programmatic designs even when the original coding statement would not properly evaluate. In the examples below, we will consider some examples that make use of this capability.</p>
<div id="example-5-using-eval-in-calculated-quantities-with-data-table" class="section level3">
<h3 class="hasAnchor">
<a href="#example-5-using-eval-in-calculated-quantities-with-data-table" class="anchor"></a>Example 5: Using eval() in Calculated Quantities with data.table</h3>
<p>Earlier in this document, we provided examples in which the eval() function could be used to programmatically add new variables to a data.table object. However, for calculated quantities inside of data.table’s .() notation, this use of eval() would generate an error. We can demonstrate this problem with the example below:</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r">prop.awareness.name &lt;- "Proportion Aware"
awareness.name &lt;- "Awareness"
region.name &lt;- "Region"

dat[,eval(mean.awareness.name) = mean(get(awareness.name)) * 100, keyby = get(region.name)]
#&gt; Error: &lt;text&gt;:5:32: unexpected '='
#&gt; 4: 
#&gt; 5: dat[,eval(mean.awareness.name) =
#&gt;                                   ^</pre></body></html></div>
<p>Translating this statement with getDTeval() would allow us to get the desired results:</p>
<div class="sourceCode" id="cb16"><html><body><pre class="r"><span class="no">the.statement</span> <span class="kw">&lt;-</span> <span class="st">'dat[, .(eval(mean.awareness.name) = mean(get(awareness.name)) * 100), keyby = get(region.name)]'</span>
<span class="fu"><a href="../reference/getDTeval.html">getDTeval</a></span>(<span class="kw">the.statement</span> <span class="kw">=</span> <span class="no">the.statement</span>, <span class="kw">return.as</span> <span class="kw">=</span> <span class="st">'all'</span>)
<span class="co">#&gt; $result</span>
<span class="co">#&gt;       Region Mean Awareness</span>
<span class="co">#&gt; 1:   Midwest       53.99338</span>
<span class="co">#&gt; 2: Northeast       53.87838</span>
<span class="co">#&gt; 3:     South       53.07453</span>
<span class="co">#&gt; 4:      West       50.66667</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $code</span>
<span class="co">#&gt; [1] "dat[, .('Mean Awareness' = mean(Awareness) * 100), keyby = Region]"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $original.statement</span>
<span class="co">#&gt; [1] "dat[, .(eval(mean.awareness.name) = mean(get(awareness.name)) * 100), keyby = get(region.name)]"</span></pre></body></html></div>
</div>
<div id="example-6-using-eval-in-calculated-quantities-with-dplyr" class="section level3">
<h3 class="hasAnchor">
<a href="#example-6-using-eval-in-calculated-quantities-with-dplyr" class="anchor"></a>Example 6: Using eval() in Calculated Quantities with dplyr</h3>
<p>In a similar fashion to the previous example, the use of the dplyr package has settings in which using programmatic names for calculated quantities can generate errors. This is demonstrated in the following example, which also uses getDTeval to resolve the issue.</p>
<div class="sourceCode" id="cb17"><html><body><pre class="r">dat %&gt;% group_by(get(region.name)) %&gt;% summarize(eval(mean.awareness.name)=mean(get(awareness.name),na.rm=T))
#&gt; Error: &lt;text&gt;:1:75: unexpected '='
#&gt; 1: dat %&gt;% group_by(get(region.name)) %&gt;% summarize(eval(mean.awareness.name)=
#&gt;                                                                               ^</pre></body></html></div>
<p>However, getDTeval allows us to resolve this issue by making the necessary translation to the optimized coding form of the statement.</p>
<div class="sourceCode" id="cb18"><html><body><pre class="r"><span class="no">the.statement</span><span class="kw">&lt;-</span> <span class="st">'dat %&gt;% group_by(get(region.name)) %&gt;% summarize(eval(mean.awareness.name)=mean(get(awareness.name),na.rm=T))'</span>
<span class="fu"><a href="../reference/getDTeval.html">getDTeval</a></span>(<span class="kw">the.statement</span> <span class="kw">=</span> <span class="no">the.statement</span>, <span class="kw">return.as</span><span class="kw">=</span><span class="st">'all'</span>)
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; $result</span>
<span class="co">#&gt; # A tibble: 4 x 2</span>
<span class="co">#&gt;   Region    `Mean Awareness`</span>
<span class="co">#&gt;   &lt;fct&gt;                &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Midwest              0.540</span>
<span class="co">#&gt; 2 Northeast            0.539</span>
<span class="co">#&gt; 3 South                0.531</span>
<span class="co">#&gt; 4 West                 0.507</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $code</span>
<span class="co">#&gt; [1] "dat %&gt;% group_by(Region) %&gt;% summarize('Mean Awareness'=mean(Awareness,na.rm=T))"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $original.statement</span>
<span class="co">#&gt; [1] "dat %&gt;% group_by(get(region.name)) %&gt;% summarize(eval(mean.awareness.name)=mean(get(awareness.name),na.rm=T))"</span></pre></body></html></div>
</div>
<div id="example-7-programmatic-mutation-with-dplyr" class="section level3">
<h3 class="hasAnchor">
<a href="#example-7-programmatic-mutation-with-dplyr" class="anchor"></a>Example 7: Programmatic Mutation with dplyr</h3>
<p>The mutate() function of dplyr can be used to add a new column to a data.frame object. This step cannot directly be used with a call to the eval() function. In the following example, we will attempt to add a new variable that calculates the user’s age in decades.</p>
<div class="sourceCode" id="cb19"><html><body><pre class="r">age.decade.name &lt;- "Age_Decade"
dat[1:10,] %&gt;% mutate(eval(age.decade.name) = floor(get(age.name)/10)) %&gt;% select(eval(age.name), eval(age.decade.name))
#&gt; Error: &lt;text&gt;:2:45: unexpected '='
#&gt; 1: age.decade.name &lt;- "Age_Decade"
#&gt; 2: dat[1:10,] %&gt;% mutate(eval(age.decade.name) =
#&gt;                                                ^</pre></body></html></div>
<p>However, getDTeval() offers an acceptable translation of the programmatic design:</p>
<div class="sourceCode" id="cb20"><html><body><pre class="r"><span class="no">the.statement</span> <span class="kw">&lt;-</span> <span class="st">'dat[1:10,] %&gt;% mutate(eval(age.decade.name) = floor(get(age.name)/10)) %&gt;% select(eval(age.name), eval(age.decade.name))'</span>
<span class="fu"><a href="../reference/getDTeval.html">getDTeval</a></span>(<span class="kw">the.statement</span> <span class="kw">=</span> <span class="no">the.statement</span>, <span class="kw">return.as</span> <span class="kw">=</span> <span class="st">'all'</span>)
<span class="co">#&gt; $result</span>
<span class="co">#&gt;     Age Age_Decade</span>
<span class="co">#&gt;  1:  49          4</span>
<span class="co">#&gt;  2:  65          6</span>
<span class="co">#&gt;  3:  18          1</span>
<span class="co">#&gt;  4:  54          5</span>
<span class="co">#&gt;  5:  33          3</span>
<span class="co">#&gt;  6:  64          6</span>
<span class="co">#&gt;  7:  49          4</span>
<span class="co">#&gt;  8:  66          6</span>
<span class="co">#&gt;  9:  31          3</span>
<span class="co">#&gt; 10:  81          8</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $code</span>
<span class="co">#&gt; [1] "dat[1:10,] %&gt;% mutate('Age_Decade' = floor(Age/10)) %&gt;% select('Age', 'Age_Decade')"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $original.statement</span>
<span class="co">#&gt; [1] "dat[1:10,] %&gt;% mutate(eval(age.decade.name) = floor(get(age.name)/10)) %&gt;% select(eval(age.name), eval(age.decade.name))"</span></pre></body></html></div>
<div id="example-8-improving-readability-of-grouped-calculations-in-dplyr" class="section level4">
<h4 class="hasAnchor">
<a href="#example-8-improving-readability-of-grouped-calculations-in-dplyr" class="anchor"></a>Example 8: Improving Readability of Grouped Calculations in dplyr</h4>
<p>When the get() function is used in dplyr’s group_by() function, the resulting name of the column is based on the programmatic statement. This is demonstrated with the following example, which calculates the average satisfaction score by the geographic region:</p>
<div class="sourceCode" id="cb21"><html><body><pre class="r"><span class="no">dat</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/get.html">get</a></span>(<span class="no">region.name</span>)) <span class="kw">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span>(<span class="kw">mean_satisfaction</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/get.html">get</a></span>(<span class="no">satisfaction.name</span>), <span class="kw">na.rm</span><span class="kw">=</span><span class="no">T</span>))
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 4 x 2</span>
<span class="co">#&gt;   `get(region.name)` mean_satisfaction</span>
<span class="co">#&gt;   &lt;fct&gt;                          &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Midwest                         4.34</span>
<span class="co">#&gt; 2 Northeast                       4.97</span>
<span class="co">#&gt; 3 South                           4.72</span>
<span class="co">#&gt; 4 West                            4.80</span></pre></body></html></div>
<div class="sourceCode" id="cb22"><html><body><pre class="r"><span class="no">the.statement</span><span class="kw">&lt;-</span> <span class="st">'dat %&gt;% group_by(get(region.name)) %&gt;% summarize(eval(sprintf("Mean %s", satisfaction.name)) = mean(get(satisfaction.name), na.rm=T))'</span>
<span class="fu"><a href="../reference/getDTeval.html">getDTeval</a></span>(<span class="kw">the.statement</span> <span class="kw">=</span> <span class="no">the.statement</span>, <span class="kw">return.as</span><span class="kw">=</span><span class="st">'all'</span>)
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; $result</span>
<span class="co">#&gt; # A tibble: 4 x 2</span>
<span class="co">#&gt;   Region    `Mean Satisfaction`</span>
<span class="co">#&gt;   &lt;fct&gt;                   &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Midwest                  4.34</span>
<span class="co">#&gt; 2 Northeast                4.97</span>
<span class="co">#&gt; 3 South                    4.72</span>
<span class="co">#&gt; 4 West                     4.80</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $code</span>
<span class="co">#&gt; [1] "dat %&gt;% group_by(Region) %&gt;% summarize('Mean Satisfaction' = mean(Satisfaction, na.rm=T))"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $original.statement</span>
<span class="co">#&gt; [1] "dat %&gt;% group_by(get(region.name)) %&gt;% summarize(eval(sprintf(\"Mean %s\", satisfaction.name)) = mean(get(satisfaction.name), na.rm=T))"</span></pre></body></html></div>
<p>This result adds greater readability to the resulting table.</p>
</div>
</div>
</div>
<div id="notes" class="section level2">
<h2 class="hasAnchor">
<a href="#notes" class="anchor"></a>Notes</h2>
<ul>
<li><p>The usage of getDTeval to find instances of get or eval should be limited to only the get() and eval() functions and not applied to the extended functions such as dynGet, mget, evalq, eval.parent etc.</p></li>
<li><p>Also, as an extension to the above mentioned disclaimer, the current design of getDTeval function might encounter translation issues with functions that end in get( or eval and may create errors when other functions that end in these prefixes are used.</p></li>
</ul>
<p>To exemplify let us examine the following case:</p>
<div class="sourceCode" id="cb23"><html><body><pre class="r"><span class="no">mean.get</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">x</span>){
  <span class="fu"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="no">x</span>))
}
<span class="fu"><a href="../reference/getDTeval.html">getDTeval</a></span>(<span class="kw">the.statement</span> <span class="kw">=</span> <span class="st">"mean.get(1:5)"</span>, <span class="kw">return.as</span> <span class="kw">=</span> <span class="st">"result"</span>)
<span class="co">#&gt; Warning in all.chars[the.begin[i]] &lt;- evaluated.arg: number of items to replace</span>
<span class="co">#&gt; is not a multiple of replacement length</span>
<span class="co">#&gt; Error in eval(expr = parse(text = the.statement), envir = envir): object 'mean.1' not found</span></pre></body></html></div>
<p>Here mean.get() is a customized function created to evaluate the mean of an objext x.</p>
<p>However, the use of mean.get() generates a translation error. Any coding statement that includes the substring <strong>get(</strong> or <strong>eval(</strong> would trigger an attempt at translation by getDTeval().</p>
<p>A workaround this issue would be to add a space between the mean.get( functionality and the parenthesis as follows:</p>
<div class="sourceCode" id="cb24"><html><body><pre class="r"><span class="fu"><a href="../reference/getDTeval.html">getDTeval</a></span>(<span class="kw">the.statement</span> <span class="kw">=</span> <span class="st">"mean.get (1:5)"</span>, <span class="kw">return.as</span> <span class="kw">=</span> <span class="st">"result"</span>)
<span class="co">#&gt; &lt;NA&gt; </span>
<span class="co">#&gt;    3</span></pre></body></html></div>
<p>This addition of space allows the getDteval() function to perform the required translation effectively. This comes with a caveat that legitimate calls to get() and eval() functions will not be translated if there is a space before the parenthesis. Therefore, the user should be careful in using the custom or extended functions involving get( or eval( while using the getDTeval package.</p>
</div>
<div id="conclusion" class="section level2">
<h2 class="hasAnchor">
<a href="#conclusion" class="anchor"></a>Conclusion</h2>
<p>This document has demonstrated the applications of the getDTeval package. Through translations of coding statements, the getDTeval() function is able to incorporate programmatic designs while approximating the running time performance of more optimized code. The method allows the user to construct programmatic statements that would be useful but are not fully supported by some existing packages. Furthermore, because the method can show the resulting translation, there is an excellent opportunity to study the different ways of constructing a coding statement. Meanwhile, the benchmark.getDTeval() function provides a direct means of comparing the typical times to evaluate a coding statement with and without programmatic designs relative to a more optimized benchmark.</p>
<p>Analyses that make use of customized functions and dynamic applications can benefit from the use of get() and eval(). The observed trade-offs between flexibility and speed can be largely overcome through the use of the getDTeval package. This also suggests greater opportunities to employ translations of code to further improve the performance of coding styles in R.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by David Shilane, Mayur Bansal.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
